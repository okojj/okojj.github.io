<!doctype html public "-//ORA//DTD CD HTML 3.2//EN">
<html>
<head>
<title>[Chapter 11] CGI Environment Variables</TITLE>
<meta name="author" content="Stephen Spainhour and Valerie Quercia">
<meta name="date" content="Fri Aug 29 18:09:15 1997">
<meta name="form" content="html">
<meta name="metadata" content="dublincore.0.1">
<meta name="objecttype" content="book part">
<meta name="otheragent" content="gmat dbtohtml">
<meta name="publisher" content="O'Reilly &amp; Associates, Inc.">
<meta name="source" content="SGML">
<meta name="subject" content="Webmaster in a Nutshell">
<meta name="title" content="Webmaster in a Nutshell">
<meta http-equiv="Content-Script-Type" content="text/javascript">
</HEAD>
<body bgcolor="#FFFFFF" text="#000000">

<div class=htmlnav>
<h1><a href='index.html'><img src="gifs/smbanner.gif" alt="Webmaster in a Nutshell" border=0></a></H1>
<table width=515 border=0 cellpadding=0 cellspacing=0>
<tr>
<td width=172 align=left valign=top><a href="http://n0rp.chemlab.org/books/web/webnut/ch10_02.html"><img src="gifs/txtpreva.gif" alt="Previous" border=0></A></td>
<td width=171 align=center valign=top><b><font face="ARIEL,HELVETICA,HELV,SANSERIF" size="-1">Chapter 11</FONT></B></TD>
<td width=172 align=right valign=top><a href="ch12_01.html"><img src="gifs/txtnexta.gif" alt="Next" border=0></A></td>
</tr>
</table>
<!-- JavaScript: prev.js -->
&nbsp;
<!-- JavaScript: next.js -->
<hr align=left width=515>
</DIV>
<h1 class=chapter><a class="TITLE" name="WEB-CH-11">11. CGI Environment Variables</A></H1>

<p class=para>
Much of the information needed by CGI programs is made available
via UNIX environment variables. Programs can access this information
as they would any environment variable (e.g., via the <i class=emphasis>%ENV</I>
associative array in Perl). 
 
 
The table below lists the environment variables commonly available 
through CGI. However, since servers occasionally vary on 
the names of environment variables they assign, check with your
own server documentation for more information.

<div class=informaltable>
<p>
<a name="WEB-CH-11-TAB-1"></A>

<table class=INFORMALTABLE>
<tr class=row>
<th align="left">Environment Variable</TH>
<th align="left">Content Returned</TH>
</TR>
<tr class=row>
<td align="left">AUTH_TYPE</TD>
<td align="left">

<p class=para>
The authentication method used to validate a user. See REMOTE_USER
and REMOTE_IDENT.</TD>
</TR>
<tr class=row>
<td align="left">CONTENT_LENGTH</TD>
<td align="left">

<p class=para>
The length of the query data (in bytes or the number of characters)
passed to the CGI program through standard input. </TD>
</TR>
<tr class=row>
<td align="left">CONTENT_TYPE</TD>
<td align="left">

<p class=para>
The media type of the query data, such as "<tt class=literal>text/html</tt>." See
<a href="ch20_01.html">Chapter 20, <i>Media Types and Subtypes</i></A>, for a listing of commonly-used content types.</TD>
</TR>
<tr class=row>
<td align="left">DOCUMENT_ROOT</TD>
<td align="left">

<p class=para>
The directory from which Web documents are served.</TD>
</TR>
<tr class=row>
<td align="left">GATEWAY_INTERFACE</TD>
<td align="left">

<p class=para>
The revision of the Common Gateway Interface that the server uses.</TD>
</TR>
<tr class=row>
<td align="left">HTTP_ACCEPT</TD>
<td align="left">

<p class=para>
A list of the media types that the client can accept.</TD>
</TR>
<tr class=row>
<td align="left">HTTP_FROM</TD>
<td align="left">

<p class=para>
The email address of the user making the query (many
browsers do not support this variable).</TD>
</TR>
<tr class=row>
<td align="left">HTTP_REFERER</TD>
<td align="left">

<p class=para>
The URL of the document that the client points to before accessing
the CGI program.</TD>
</TR>
<tr class=row>
<td align="left">HTTP_USER_AGENT</TD>
<td align="left">

<p class=para>
The browser the client is using to issue the request.</TD>
</TR>
<tr class=row>
<td align="left">PATH_INFO</TD>
<td align="left">

<p class=para>
Extra path information passed to a CGI program. See <a href="ch09_01.html">Chapter 9, <i>CGI Overview</i></A>, for more information on extra path information.</TD>
</TR>
<tr class=row>
<td align="left">PATH_TRANSLATED</TD>
<td align="left">

<p class=para>
The translated version of the path given by the
variable PATH_INFO.</TD>
</TR>
<tr class=row>
<td align="left">QUERY_STRING</TD>
<td align="left">

<p class=para>
The query information passed to the program. It is appended to 
the URL following a question mark (<tt class=literal>?</tt>). See <a href="ch09_01.html">Chapter 9, <i>CGI Overview</i></A> for
more information on query strings.</TD>
</TR>
<tr class=row>
<td align="left">REMOTE_ADDR</TD>
<td align="left">

<p class=para>
The remote IP address from which the user is making the request.</TD>
</TR>
<tr class=row>
<td align="left">REMOTE_HOST</TD>
<td align="left">

<p class=para>
The remote hostname from which the user is making the request.</TD>
</TR>
<tr class=row>
<td align="left">REMOTE_IDENT</TD>
<td align="left">

<p class=para>
The user making the request.</TD>
</TR>
<tr class=row>
<td align="left">REMOTE_USER</TD>
<td align="left">

<p class=para>
The authenticated name of the user making the query.</TD>
</TR>
<tr class=row>
<td align="left">REQUEST_METHOD</TD>
<td align="left">

<p class=para>
The method with which the information request was issued (e.g., GET,
POST, HEAD). See  <a href="ch09_01.html">Chapter 9, <i>CGI Overview</i></A> and <a href="ch17_01.html">Chapter 17, <i>HTTP Overview</i></A> for more
information on request methods.</TD>
</TR>
<tr class=row>
<td align="left">SCRIPT_NAME</TD>
<td align="left">

<p class=para>
The virtual path (e.g., <i class=emphasis>/cgi-bin/program.pl</I>) of the
script being executed.</TD>
</TR>
<tr class=row>
<td align="left">SERVER_NAME</TD>
<td align="left">

<p class=para>
The server's hostname or IP address.</TD>
</TR>
<tr class=row>
<td align="left">SERVER_PORT</TD>
<td align="left">

<p class=para>
The port number of the host on which the server is running.</TD>
</TR>
<tr class=row>
<td align="left">SERVER_PROTOCOL</TD>
<td align="left">

<p class=para>
The name and revision of the information protocol the request came
in with.</TD>
</TR>
<tr class=row>
<td align="left">SERVER_SOFTWARE</TD>
<td align="left">

<p class=para>
The name and version of the server software that is answering the
client request.</TD>
</TR>
</TABLE>
<p>
</DIV>

<p class=para>
Here's a simple Perl CGI script that uses environment variables
to display various information about the server:

<p class=para>
<div class=screen>
<p>
<pre>
#!/usr/local/bin/perl
print "Content-type: text/html", "\n\n";
print "&lt;HTML&gt;", "\n";
print "&lt;HEAD&gt;&lt;TITLE&gt;About this Server&lt;/TITLE&gt;&lt;/HEAD&gt;", "\n";
print "&lt;BODY&gt;&lt;H1&gt;About this Server&lt;/H1&gt;", "\n";
print "&lt;HR&gt;&lt;PRE&gt;";
print "Server Name:       ", $ENV{'SERVER_NAME'}, "&lt;BR&gt;", "\n";
print "Running on Port:   ", $ENV{'SERVER_PORT'}, "&lt;BR&gt;", "\n";
print "Server Software:   ", $ENV{'SERVER_SOFTWARE'}, "&lt;BR&gt;", "\n";
print "Server Protocol:   ", $ENV{'SERVER_PROTOCOL'}, "&lt;BR&gt;", "\n";
print "CGI Revision:      ", $ENV{'GATEWAY_INTERFACE'}, "&lt;BR&gt;", "\n";
print "&lt;HR&gt;&lt;/PRE&gt;", "\n";
print "&lt;/BODY&gt;&lt;/HTML&gt;", "\n";
exit (0);
</PRE>
</DIV>

<p class=para>
The preceding program outputs the contents of five environment
variables into an HTML document. In Perl, you can access 
the environment variables using the <i class=emphasis>%ENV</I> associative array.
Here's a typical output of the program:

<p class=para>
<div class=screen>
<p>
<pre>
&lt;HTML&gt;
&lt;HEAD&gt;&lt;TITLE&gt;About this Server&lt;/TITLE&gt;&lt;/HEAD&gt;
&lt;BODY&gt;&lt;H1&gt;About this Server&lt;/H1&gt;
&lt;HR&gt;&lt;PRE&gt;
Server Name:          ora.com
Running on Port:      80
Server Software:      NCSA/1.4.2
Server Protocol:      HTTP/1.0
CGI Revision:         CGI/1.1
&lt;HR&gt;&lt;/PRE&gt;
&lt;/BODY&gt;&lt;/HTML&gt;
</PRE>
</DIV>

<p class=para>

<div class=htmlnav>

<p>
<hr align=left width=515>
<table width=515 border=0 cellpadding=0 cellspacing=0>
<tr>
<td width=172 align=left valign=top><a href="http://n0rp.chemlab.org/books/web/webnut/ch10_02.html"><img src="gifs/txtpreva.gif" alt="Previous" border=0></A></td>
<td width=171 align=center valign=top><a href="index.html"><img src='gifs/txthome.gif' border=0 alt='Home'></a></td>
<td width=172 align=right valign=top><a href="ch12_01.html"><img src="gifs/txtnexta.gif" alt="Next" border=0></A></td>
</tr>
<tr>
<td width=172 align=left valign=top>An Example Form</td>
<td width=171 align=center valign=top><a href="index/idx_0.html"><img src='gifs/index.gif' alt='Book Index' border=0></a></td>
<td width=172 align=right valign=top>Cookies</td>
</tr>
</table>
<hr align=left width=515>

<img src="gifs/smnavbar.gif" usemap="#map" border=0> 
<map name="map"> 
<area shape="Rect" coords="0,0,45,20" href="../html/index.html" alt="HTML: The Definitive Guide">
<area shape="Rect" coords="46,0,164,37" href="../cgi/index.html" alt="CGI Programming">
<area shape="Rect" coords="163,0,248,32" href="../jscript/index.html" alt="JavaScript: The Definitive Guide">
<area shape="Rect" coords="247,0,371,44" href="../perl/index.html" alt="Programming Perl">
<area shape="Rect" coords="371,0,524,46" href="index.html" alt="WebMaster in a Nutshell">
</MAP>
</DIV>

</body>
</html>
